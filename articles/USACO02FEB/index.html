<html><head><meta charset="UTF-8"></meta> <link rel="stylesheet" type="text/css" href="/css/main.css"></link> <link rel="icon" type="images/png" href="/images/favicon.png"></link> <script src="/js/element.js"></script> <title>USACO02FEB Cow Cycling - Jacder's Blog</title> <link rel="stylesheet" type="text/css" href="/css/art.css"></link> <link rel="stylesheet" href="//unpkg.com/@highlightjs/cdn-assets@11.5.1/styles/atom-one-light.min.css"></link> <script src="//unpkg.com/@highlightjs/cdn-assets@11.5.1/highlight.min.js"></script> <script src="/js/language.min.js"></script> <script src="/js/crypto-js.min.js"></script></head> <body><div class="content"><div class="sidebar" id="sidebar"><div class="sidebar-title"><p style="font-weight: bold; font-size: 24px;">Jacder's Blog</p> <div class="saying" id="saying"></div></div> <div class="sidebar-body"><ul class="sidebar-menu"><a href="/"><li class="list-item sidebar-menu-item" style="">Home</li></a> <a href="/articles"><li class="list-item sidebar-menu-item" style="background: #e5e5e5">Articles</li></a></ul> <div class="sidebar-about"><div style="text-align: center; font-size: 16px;">About me</div> <hr align="center"></hr> <div class="avatar-rotate" style="margin: 2 auto; width: min-content"><img class="avatar" alt="Jacder" src="/images/avatar.png"></img></div> <ul class="sidebar-links"><li class="sidebar-links-item"><a class="friend-link" href="https://github.com/coderoj">Github</a></li> <li class="sidebar-links-item"><a class="friend-link" href="https://gitee.com/coderoj">Gitee</a></li> <li class="sidebar-links-item"><a class="friend-link" href="https://codeforces.com/profile/yz6205">CodeForces</a></li> <li class="sidebar-links-item"><a class="friend-link" href="https://luogu.com.cn/user/43368">Luogu</a></li> <li class="sidebar-links-item"><a class="friend-link" href="mailto:coderoj@outlook.com">Email</a></li> <li class="sidebar-links-item"><a class="friend-link" href="https://user.qzone.qq.com/2602904088">QQ</a></li></ul></div> <ul class="sidebar-links"><div style="text-align: center; font-size: 16px;">links</div> <hr align="center"></hr> <li class="sidebar-links-item"><a class="friend-link" href="https://www.cnblogs.com/Forever-666">Clovers</a></li> <li class="sidebar-links-item"><a class="friend-link" href="https://dpair.gitee.io">DPair</a></li> <li class="sidebar-links-item"><a class="friend-link" href="https://www.cnblogs.com/Flying2018">Flying2018</a></li> <li class="sidebar-links-item"><a class="friend-link" href="https://www.luogu.com.cn/blog/c2522943959/#">OIerwanhong</a></li> <li class="sidebar-links-item"><a class="friend-link" href="http://blog.leanote.com/rem_001">REM_001</a></li> <li class="sidebar-links-item"><a class="friend-link" href="https://www.cnblogs.com/huangchenyan">SevenDawns</a></li> <li class="sidebar-links-item"><a class="friend-link" href="https://xyf007.ml">xyf007</a></li> <li class="sidebar-links-item"><a class="friend-link" href="https://xyix.gitee.io">xYix</a></li></ul></div></div> <div class="root"><article><h2 id="description">Description</h2> <blockquote><p>奶牛自行车队由N名队员组成，他们正准备参加一个比赛，这场比赛的路程共有D圈。 车队在比赛时会排成一条直线，由于存在空气阻力，当骑车速度达到每分钟$x$圈时，领头的  奶牛每分钟消耗的体力为$x^2$，其它奶牛每分钟消耗的体力为$x$。每头奶牛的初始体力值都是  相同的，记作$E$。如果有些奶牛在比赛过程中的体力不支，就会掉队，掉队的奶牛不能继续 参加比赛。每支队伍最后只要有一头奶牛能到终点就可以了。</p> <p>比赛规定，最小的计时单位是分钟，在每分钟开始的时候，车队要哪头奶牛负责领头， 领头奶牛不能在这分数中内掉队，每分钟骑过的圈数也必须是整数。</p> <p>请帮忙计划一下，采用什么样的策略才能让车队以最快的时间到达终点？
</p></blockquote> <h2 id="tutorial">Tutorial</h2> <p>一道很好的 <code>dp</code> 题</p> <h3 id="%E7%8A%B6%E6%80%81">状态</h3> <p>首先可以想到至少$O(E^n)$ 暴力记录每头奶牛的体力</p> <h3 id="%E4%BC%98%E5%8C%96">优化</h3> <p>不难发现一个性质:</p> <ul><li>存在一种最优解，带头的奶牛一直带头直到体力不支为之，换句话说，在任意时刻，所有不带头的奶牛体力相同</li></ul> <p>然后就可以有多项式复杂度的 <code>dp</code> ，令 <code>dp[i][j][f][t]</code> 表示 骑了 <code>i</code> 圈，还剩下 <code>j</code> 头奶牛，带头的体力为 <code>f</code> ，剩下的体力为 <code>t</code> 时，最小的圈数</p> <p>但是这样 <code>dp</code> 大概要$2\times 10^{10}$左右，还要进一步优化</p> <p>另一个性质:</p> <ul><li>由于不带头的奶牛从来没有带头过，所以有用的 <code>dp</code> 一定满足 <code>t = E - i</code></li></ul> <p>于是就可以把 <code>dp</code> 的最后一维压缩掉</p> <p>复杂度: $O(N\cdot D\cdot E\cdot \sqrt{D})$</p> <h3 id="%E8%BD%AC%E7%A7%BB">转移</h3> <p>一共两种转移</p> <ul><li><code>dp[i][k][f] -&gt; dp[i-t][k][f-t*t]</code></li> <li><code>dp[i][k][f] -&gt; dp[i-t][k-1][e-(d-(i-t))]</code></li></ul> <h4 id="%E5%AE%9E%E7%8E%B0">实现</h4> <pre><code class="lang-cpp">repb (i,d,1) repb (k,n,1) repb (f,e,1) repa (t,i) if (f-t*t&gt;=0) {
   checkMin(dp[i-t][k][f-t*t], dp[i][k][f]+1);
   checkMin(dp[i-t][k-1][e-(d-(i-t))], dp[i][k][f]+1); }
</code></pre> <p>上面的方法已经可以AC了，并且跑得不慢。</p> <p>要知道这是02年的题，当时的编译器和机器下这样估计得T</p> <h3 id="%E5%86%8D%E4%BC%98%E5%8C%96">再优化</h3> <p>发现一件事情，对于第一种转移，对于每个 <code>k</code> ，我们干的事情实际上是相同的</p> <p>于是我们可以预处理出 <code>f[i][j]</code> ，表示在带头的牛体力为 <code>i</code> 且不掉队的情况下，骑 <code>j</code> 圈需要的最少时间</p> <p>预处理时间复杂度$O(D\cdot E\cdot \sqrt{D})$</p> <p>然后求出 <code>F[i][j]</code> ，表示 <code>i</code> 头牛，骑 <code>j</code> 圈的最小时间</p> <p>答案即为 <code>dp[n][d]</code></p> <p>转移:</p> <ul><li><code>F[i-1][j-k]+f[E-d][k] -&gt; F[i][j]</code></li></ul> <p>复杂度$O(ND^2)$</p> <p>总时间复杂度$O(DE\cdot \sqrt{D}+ND^2)$</p> <h4 id="%E5%AE%9E%E7%8E%B0">实现</h4> <pre><code class="lang-c++">memset(f,0x3f,sizeof(f));
for ( int i=0;i&lt;=E;i++ ) f[i][0]=0;
for ( int i=1;i&lt;=E;i++ ) 
   for ( int j=1;j&lt;=D;j++ ) 
       for ( int k=1;k&lt;=j&amp;&amp;k*k&lt;=i;k++ ) 
           f[i][j]=min(f[i][j],f[i-k*k][j-k]+1);
memset(F,0x3f,sizeof(F));
F[0][0]=0;
for ( int i=1;i&lt;=n;i++ ) 
   for ( int j=0;j&lt;=D;j++ ) {
       int d=D-j;
       for ( int k=0;k&lt;=j;k++ ) {
           F[i][j]=min(F[i][j],F[i-1][j-k]+f[E-d][k]);    } }
</code></pre> <br></article> <br> <hr class="hr-line"></hr> <div style="font-size: 12px; display: flex;"><a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png"></img></a> <div style="margin-left: 10px;">This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License.</a></div></div> <script>hljs.configure({ tabReplace: '  ' }); 
      hljs.highlightAll(); 
      loadMath();</script></div></div></body></html>